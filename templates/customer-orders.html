<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=100%, maximum-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="static/customer-orders.css" />
    <link rel="stylesheet" type="text/css" href="static/styleguide.css" />
    <link rel="stylesheet" type="text/css" href="static/globals.css" />
  </head>
  <body style="margin: 0; background: #ffffff">
    <input type="hidden" id="anPageName" name="page" value="customer-orders" />
    <div class="customer-orders screen">
      <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <ul>
              {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
      </div>
      <div id="balance-modal" class="modal hidden">
        <div class="modal-content">
          <span class="close-button" id="close-balance-modal">&times;</span>
          <p id="balance-text">Your balance is: €0.00</p>
        </div>
      </div>      
      <script src="{{ url_for('static', filename='js/globals.js') }}"></script>
      <!-- Navigation -->
      <div class="top-bar">
        <img class="logo-lieferspatz-1" src="{{ url_for('static', filename='img/logo-lieferspatz-1.png') }}" alt="logo lieferspatz 1" />
        <div class="navigation">
          <a href="{{ url_for('home') }}" class="button button-danger">Home</a>
          <a href="{{ url_for('signup') }}" class="button button-danger">Sign up</a>      
          <a href="{{ url_for('login') }}" class="button button-danger">Log in</a>
          <a href="{{ url_for('about') }}" class="button button-danger">About us</a>
          {% if session['user_id'] %}
              <a href="#" id="balance-btn" class="button button-danger">Balance</a>
              <a href="{{ url_for('cart') }}" class="button button-danger">Cart</a> 
              <a href="{{ url_for('orders') }}" class="button button-danger">Orders</a>
              <a href="{{ url_for('logout') }}" class="button button-danger">Logout</a>
              <span class="user-welcome">Welcome {{ session['user_name'] }}</span>
          {% else %}
              <a href="{{ url_for('login') }}" class="button button-danger">Login</a>
              <a href="{{ url_for('signup') }}" class="button button-danger">Sign Up</a>
          {% endif %}
        </div>     
      </div>
      <!-- Welcome Section -->
      <div class="section">
        <div class="container">
          <div class="title-1 roboto-bold-black-40px">Welcome to Lieferspatz</div>
          <p class="description roboto-bold-black-16px">Bringing convenience to your doorstep</p>
        </div>
        <img class="vector-200" src="static/img/vector-200-8.svg" alt="Vector 200" />
      </div>
      <div class="orders">
        <img class="vector-200-1" src="img/vector-200-8.svg" alt="Vector 200" />
        <h1 class="title-8 roboto-bold-black-50px">
          <span class="roboto-bold-black-50px">Order History<br /></span>
          <span class="roboto-bold-black-20px">Here you can see all your orders.</span>
        </h1>
        {% if orders %}
          <div class="orders-container">
            {% for order in orders %}
              <!-- Each order gets its own card -->
              <div class="order-card">
                <div class="card">
                  <div class="text-content">
                    <div class="title-4">Order {{ order['order'].OrderID }}</div>
                    <div class="subtitle">{{ order['order'].OrderDate }}</div>
                    <p class="subtitle scrollable-items">
                      {% for item in order['items'] %}
                      <li>{{ item.quantity }}x {{ item.name }} - {{ item.price }} €</li>
                    {% endfor %}                    
                    </p>
                    <div class="subtitle-1 subtitle-3 roboto-bold-black-20px">
                      Status: <span id="order-status-{{ order['order'].OrderID }}">{{ order['order'].Status }}</span>
                    </div>
                    <div class="subtitle-2 subtitle-3 roboto-bold-black-20px">
                      Order Total: {{ order['total'] }} €
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="title-5 roboto-semi-bold-black-24px">You have no orders yet.</div>
        {% endif %}
      </div>       
          <div class="button-1">
          <a href="/restaurants" class="primary">
            <div class="title-2 roboto-bold-white-16px">View Restaurants</div>
          </a>
          </div>
        </div>
      </div>
      <!-- Footer Section -->
      <div class="section-1">
        <div class="container-3 container-4 roboto-regular-normal-black-16px">
          <p class="title-9 valign-text-middle title-12">© 2024 Lieferspatz. All Rights Reserved</p>
          <div class="title-10 valign-text-middle title-12">Terms &amp; Conditions</div>
          <div class="title-11 valign-text-middle title-12">Privacy Policy</div>
        </div>
      </div>
    </div>
  </body>
</html>
